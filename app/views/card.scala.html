@import views.Page
@(card: CompleteCard, quantity: Int)(implicit request: UserRequest[_])
@main(card.name, Page.Collection) {
	<div class="page-header">
		<h2><span style="color: #999;">Card:</span> @card.name <small>(@card.identifier)</small></h2>
	</div>
	<ol class="breadcrumb">
		<li><a href="@routes.Collection.index()">Universes</a></li>
		<li><a href="@routes.Collection.universe(card.universe_id)">@card.universe</a></li>
		<li class="active">@card.name</li>
	</ol>
	<div class="row" style="margin-bottom: 15px;">
		<div class="col-md-2">
			<div class="panel panel-default" id="the-card">
				<div class="panel-body" style="display: flex; justify-content: center; padding: 15px 5px;">
					@views.html.components.card(card, quantity, big = true)
				</div>
				<div class="panel-footer small">
					<div style="display: flex; justify-content: space-between; align-items: center;">
						<button id="btn-minus" class="btn btn-default btn-xs" style="width: 30px;">-</button>
						<span id="card-qte"><strong>@quantity</strong></span>
						<button id="btn-plus" class="btn btn-default btn-xs" style="width: 30px;">+</button>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-10">
			<table class="table table">
				<tr>
					<th>Identifier</th>
					<td>@card.identifier</td>
					<th>Rarity</th>
					<td>@card.rarity</td>
				</tr>
				<tr>
					<th>Universe</th>
					<td><a href="@routes.Collection.universe(card.universe_id)">@card.universe</a></td>
					<th>Extension</th>
					<td><a href="@routes.Collection.universe(card.universe_id)#ext-@card.extension_id">@card.extension</a></td>
				</tr>
				<tr>
					<th>Type</th>
					<td>@card.tpe</td>
					<th>Color</th>
					<td>@card.color</td>
				</tr>
				<tr>
					<th>Level</th>
					<td>@card.level</td>
					<th>Trigger</th>
					<td>@card.trigger</td>
				</tr>
				<tr>
					<th>Cost</th>
					<td>@card.cost</td>
					<th>Soul</th>
					<td>@card.soul</td>
				</tr>
				<tr>
					<th>Power</th>
					<td>@card.power</td>
					<th>Limitation</th>
					<td>@card.limitation</td>
				</tr>
				<tr>
					<th>Trait 1</th>
					<td>@card.trait1</td>
					<th>Trait 2</th>
					<td>@card.trait2</td>
				</tr>
				<tr>
					<th>Ability</th>
					<td colspan="3"><pre>@card.ability</pre></td>
				</tr>
				<tr>
					<th>Flavor</th>
					<td colspan="3"><em>@card.flavor</em></td>
				</tr>
			</table>
		</div>
	</div>
	<div class="row">
		<div class="col-md-6">
			<div class="panel panel-info">
				<div class="panel-heading">Possible combo with this card</div>
				<div class="panel-body">...</div>
			</div>
		</div>
		<div class="col-md-6">
			<div class="panel panel-info">
				<div class="panel-heading">Decks containing this card</div>
				<div class="panel-body">...</div>
			</div>
		</div>
	</div>
	<script>
		var qte = @quantity;
		var qte_below = $("#card-qte");
		var qte_over = $("#the-card").find(".card-strip div");
		var card = $("#the-card").find(".card")[0];

		function handle_click(mod) {
			return function() {
				var old_qte = qte;
				qte = Math.max(0, old_qte + mod);

				qte_below.text(qte);
				qte_over.text(qte);

				if (qte != old_qte) {
					update_card(card.dataset, mod);
				}
			}
		}

		$("#btn-minus").click(handle_click(-1));
		$("#btn-plus").click(handle_click(+1));
	</script>
}
